#!/bin/bash
# ====================================
# Histórico limpo, comentado e detalhado
# Torres Camoes
# ====================================

# -------------------------------
# Histórico
# -------------------------------
history -r                   # Recarrega o histórico do bash
history > ~/backup_history.txt  # Salva o histórico atual em arquivo de backup

# -------------------------------
# Node.js / JSON Server / Express
# -------------------------------
npm install                  # Instala dependências do projeto
npm install jsonwebtoken     # Instala biblioteca para JWT
npm install json-server --save  # Instala json-server localmente no projeto
node servidor.js             # Executa o servidor Node.js
npm run start-auth           # Executa o servidor com script definido no package.json
npx json-server --watch database.json --https --port 8000 --key server.key --cert server.crt
                             # Inicia json-server com HTTPS usando certificados
curl -X POST -H "Content-Type: application/json" -d '{"email":"lcs@alura.com","senha":"123"}' http://localhost:8000/public/login
                             # Faz requisição POST de login para o servidor
curl http://localhost:8000    # Faz requisição GET ao servidor local
curl http://localhost:3000/livros  # Faz requisição GET à rota livros
sudo lsof -i :8000            # Verifica qual processo está usando a porta 8000
app.listen(3000, () => console.log('Servidor na porta 3000'));
                             # Define servidor para ouvir na porta 3000

# -------------------------------
# OpenSSL / Certificados
# -------------------------------
openssl req -x509 -sha256 -nodes -days 365 -newkey rsa:2048 -keyout server.key -out server.crt
                             # Gera um certificado SSL autoassinado
openssl x509 -in server.crt -text -noout
                             # Mostra informações do certificado gerado
openssl rsa -in server.key -check
                             # Verifica integridade da chave privada

# -------------------------------
# Apache / Nginx
# -------------------------------
sudo apt update               # Atualiza lista de pacotes
sudo apt install apache2 -y   # Instala servidor Apache
sudo service apache2 start    # Inicia Apache
sudo service apache2 stop     # Para Apache
sudo systemctl restart apache2  # Reinicia Apache
sudo systemctl status apache2   # Mostra status do Apache
sudo apache2ctl configtest      # Testa configuração do Apache
sudo journalctl -xeu apache2.service  # Mostra logs recentes do Apache
sudo nano /etc/apache2/sites-available/000-default.conf  # Edita arquivo de configuração
sudo a2ensite meu-site.conf     # Habilita site virtual
sudo systemctl reload apache2   # Aplica alterações no Apache
sudo ss -tulpn | grep 8080      # Verifica processos usando porta 8080

sudo apt install nginx -y       # Instala servidor Nginx
sudo systemctl start nginx      # Inicia Nginx
sudo systemctl restart nginx    # Reinicia Nginx
sudo systemctl status nginx     # Mostra status do Nginx

# -------------------------------
# PHP / WordPress / MySQL
# -------------------------------
sudo apt install php libapache2-mod-php php-mysql -y  # Instala PHP e módulos
php -v                      # Verifica versão do PHP
sudo apt install mysql-server -y  # Instala MySQL
sudo service mysql status        # Checa status do MySQL
sudo mysql -u root -p            # Acessa MySQL como root
SHOW DATABASES;                  # Lista bancos de dados

# WordPress
sudo wget https://wordpress.org/latest.tar.gz  # Baixa WordPress
sudo tar -xzvf latest.tar.gz                  # Descompacta arquivo
sudo mv wordpress/* .                         # Move conteúdo para pasta atual
sudo rm -rf wordpress latest.tar.gz           # Remove arquivos temporários
sudo cp wp-config-sample.php wp-config.php    # Cria arquivo de configuração
sudo chown -R www-data:www-data /var/www/html  # Define dono para Apache
sudo chmod -R 755 /var/www/html               # Ajusta permissões
sudo service apache2 restart                  # Reinicia Apache para aplicar

# -------------------------------
# Git
# -------------------------------
git init                        # Inicializa repositório Git
git add .                        # Adiciona todos arquivos ao commit
git commit -m "Versão inicial do meu site"  # Cria commit inicial
git remote add origin https://github.com/tluistorres/meu-site.git  # Adiciona remoto
git branch -M main               # Renomeia branch principal para main
git push -u origin main          # Envia alterações para o GitHub
git config --global user.name "Torres Camoes"  # Configura nome global
git config --global user.email "luistorres090165@gmail.com"  # Configura e-mail global
git config --global credential.helper store  # Armazena credenciais para push

# -------------------------------
# Bash / Scripts / Backup
# -------------------------------
mkdir -p ~/relatorio && touch ~/relatorio/processos.txt  # Cria diretório e arquivo de logs
ps aux > ~/relatorio/processos.txt                       # Salva lista de processos
chmod +x ~/relatorio/primeiro_programa.sh                # Torna script executável
echo -e '#!/bin/bash\n# Nosso primeiro programa em Shell Script' > ~/relatorio/primeiro_programa.sh
./relatorio/primeiro_programa.sh                         # Executa script
echo "Olá, mundo!" >> ~/relatorio/primeiro_programa.sh   # Adiciona linha ao script
echo 'nome="Torres"' >> ~/relatorio/primeiro_programa.sh
echo 'echo "Olá, $nome!"' >> ~/relatorio/primeiro_programa.sh
./relatorio/primeiro_programa.sh                         # Executa script atualizado

mkdir -p /backup
sudo tar -czf /backup/$(date +%d%m%Y-%H%M)-home.tar.gz -C /home torres_camoes  # Faz backup
chmod +x backup.sh
./backup.sh

# -------------------------------
# Crontab / Cron jobs
# -------------------------------
crontab -e                  # Edita crontab do usuário
crontab -l                  # Lista crontab
sudo service cron status    # Verifica serviço cron
grep CRON /var/log/syslog | tail -n 20  # Últimas entradas do cron

# -------------------------------
# Utilitários / Monitoramento
# -------------------------------
htop                          # Monitora processos interativos
top                           # Monitora processos em tempo real
ps aux | grep apache2          # Filtra processos Apache
ps aux | grep mysql            # Filtra processos MySQL
sudo killall -STOP apache2     # Pausa processos Apache
sudo killall -CONT apache2     # Retoma processos Apache
sudo renice -19 <PID>          # Aumenta prioridade de processo
sudo renice +15 <PID>          # Reduz prioridade de processo

# -------------------------------
# Sistema / Arquivos / Navegação
# -------------------------------
pwd                            # Mostra diretório atual
whoami                         # Mostra usuário atual
ls -la                          # Lista arquivos com detalhes
mkdir ~/arquivos_teste         # Cria diretório
cd ~/arquivos_teste            # Navega para diretório
echo "Primeira linha" > myfile.txt  # Cria arquivo com primeira linha
echo "Segunda linha" >> myfile.txt  # Adiciona segunda linha
cat myfile.txt                 # Mostra conteúdo do arquivo
wc -l myfile.txt               # Conta linhas do arquivo
nano myfile.txt                # Edita arquivo com nano
less myfile.txt                # Visualiza arquivo com menos
mv ~/arquivos_teste ~/exemplos_praticos  # Renomeia diretório
cd ~/exemplos_praticos/
cat exemplos_praticos.txt      # Mostra conteúdo de arquivo

# -------------------------------
# Rede / Diagnóstico
# -------------------------------
hostname                       # Mostra nome do host
hostname -I                     # Mostra IP do host
ip a                            # Mostra interfaces de rede
ip a | grep inet                # Filtra endereços IP
ping google.com                 # Testa conexão com Google


## Guia Completo: Acessar, Editar e Sincronizar Arquivos do GitHub no Linux
## Parte 1: Preparação do Ambiente (Primeira Vez ou Novo Projeto)

Escolha um diretório para seus projetos:
É uma boa prática ter uma pasta central para seus repositórios.
code Bash

mkdir ~/Projetos_GitHub  # Cria a pasta 'Projetos_GitHub' no seu diretório home
cd ~/Projetos_GitHub     # Navega para a nova pasta

  

## Clone o repositório do GitHub:
## Substitua tluistorres/linux_comandos.md pelo seu usuário/nome do repositório.

    

git clone https://github.com/tluistorres/linux_comandos.md.git

# Este comando baixa todo o conteúdo do repositório para uma pasta local
# (neste caso, 'linux_comandos.md') dentro do seu diretório atual.

  

Entre no diretório do repositório clonado:
Você SEMPRE deve estar dentro do diretório do seu repositório para executar comandos Git.
code Bash

    

cd linux_comandos.md

  

## Crie e ative um Ambiente Virtual Python (venv) - ESSENCIAL para projetos Python e notebooks:
## Isso isola as dependências do seu projeto. Se você já fez isso, pode pular para a ativação.

    

# (Opcional, se 'python3.12-venv' não estiver instalado)
# sudo apt update && sudo apt install python3.12-venv -y

python3 -m venv venv  # Cria um ambiente virtual chamado 'venv'
source venv/bin/activate # Ativa o ambiente virtual. Seu prompt mudará para (venv)

  

## Instale as ferramentas necessárias no seu ambiente virtual:

JupyterLab (para editar .ipynb interativamente no navegador):

   

pip install jupyterlab

  

Kivy (se o seu app.py usar Kivy):

    

pip install kivy

  

Requests (para o app.py que busca dados de API):
code Bash

    

pip install requests

  

Instale o VS Code (se ainda não o fez):

            

sudo snap install code --classic

 # Isso instala o VS Code via Snap com permissões ampliadas.

          

## Parte 2: Editando Arquivos e Sincronizando com o GitHub

Assuma que você está dentro do diretório do seu projeto (~/Projetos_GitHub/linux_comandos.md) e com o ambiente virtual ativado ((venv) no seu prompt).

## 2.1. Editando arquivos de Texto Simples (.txt, .md, .py)

Você pode usar nano (terminal) ou VS Code (gráfico) para esses arquivos.

Opção A: Usando nano (simples e rápido no terminal)

##  Abra o arquivo para edição:

        

 nano comandos_usados.txt # Ou app.py, README.md

      

## Faça suas edições.

Salve as alterações: Pressione Ctrl + O, depois Enter.

Saia do nano: Pressione Ctrl + X.

## Opção B: Usando VS Code (poderoso, com realce de sintaxe)

Abra o VS Code no diretório atual:

        

code .

## Isso abre o VS Code com a pasta do seu projeto.

      

No VS Code: No painel "Explorer" à esquerda, clique no arquivo que deseja editar (ex: comandos_usados.txt, app.py).

Faça suas edições. O VS Code salva automaticamente ou você pode usar Ctrl + S.

Feche o VS Code quando terminar, ou deixe-o aberto para outras edições.

## 2.2. Editando Jupyter Notebooks (.ipynb) - Onde o "código entre textos" some!

Opção A: Usando JupyterLab (Recomendado para notebooks no navegador)

Inicie o JupyterLab no seu terminal (com venv ativo):

      

jupyter lab

  

## Isso abrirá uma nova aba no seu navegador web padrão.

      

Na interface web do JupyterLab:

Navegue e clique no arquivo .ipynb que deseja editar (ex: Comandos_linux.ipynb).

Edite as células de código e Markdown de forma interativa.

Salve suas alterações (ícone de disquete ou Ctrl + S dentro do navegador).

Quando terminar: Feche a aba do navegador. No terminal onde você iniciou o jupyter lab, pressione Ctrl + C duas vezes para parar o servidor.

## Opção B: Usando VS Code (Alternativa para notebooks, sem precisar do navegador externo)

Abra o VS Code no diretório atual:

        

code .

      

No VS Code: Certifique-se de ter as extensões Python e Jupyter instaladas (vá para o ícone de Extensões na barra lateral e pesquise/instale).

Abra o arquivo .ipynb: No painel "Explorer", clique no notebook (ex: Numpy_fundamentos.ipynb). O VS Code o abrirá em um visualizador/editor de notebooks interativo.

Importante: No canto inferior direito do VS Code, clique no interpretador Python e selecione o interpretador do seu ambiente (venv) para que o notebook use as bibliotecas corretas.

Faça suas edições e execute as células.

Salve suas alterações (Ctrl + S).

## 2.3. Sincronizando as Edições com o GitHub (O CICLO GIT)

Depois de editar e salvar seus arquivos (usando nano, VS Code ou JupyterLab), você precisa usar o Git para enviar essas mudanças para o GitHub.

Verifique o status das suas alterações:

   

git status

# Este comando mostra quais arquivos foram modificados (em vermelho)
# e quais estão prontos para serem adicionados (em verde).

  

Adicione as alterações ao "staging area":
Isso informa ao Git quais arquivos você quer incluir na próxima "commit".

    

git add .

# O '.' adiciona todos os arquivos modificados e novos no diretório atual e subdiretórios.
# Você pode adicionar arquivos específicos também: git add Comandos_linux.ipynb

  

Confirme o status novamente (opcional, para ver se estão em verde):

    

git status

  

Commite as alterações (salve no histórico local do Git):
Cada commit deve ter uma mensagem descritiva do que foi alterado.

    

git commit -m "Atualizei o notebook de comandos Linux e corrigi o app.py"

## Substitua a mensagem por algo que descreva suas edições.

  

Envie as alterações para o GitHub (o repositório remoto):

        

git push origin main

# 'origin' se refere ao seu repositório no GitHub.
# 'main' é o nome da sua branch principal (pode ser 'master' em repositórios antigos).
# O Git pode pedir seu nome de usuário e senha/token de acesso pessoal do GitHub aqui.

      

Parabéns! Você tem agora o conhecimento e os comandos para gerenciar seus projetos do GitHub no Linux, editar diversos tipos de arquivos (incluindo .ipynb de forma correta) e manter tudo sincronizado.
